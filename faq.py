"""Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„ â€” Ø¨Ø§ Ù…Ø­ØªÙˆØ§ÛŒ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ú©Ø§Ù…Ù„ Ùˆ Ø¨Ø±ÙˆØ²"""
import logging
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import ContextTypes
from database import db

logger = logging.getLogger(__name__)

DEFAULT_FAQS = {
    'ğŸ”¬ Ø¹Ù„ÙˆÙ… Ù¾Ø§ÛŒÙ‡': [
        ('Ø¹Ù„ÙˆÙ… Ù¾Ø§ÛŒÙ‡ Ú†ÛŒÙ‡ Ùˆ Ú†Ø·ÙˆØ± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†Ù…ØŸ',
         'Ø¨Ø®Ø´ Ø¹Ù„ÙˆÙ… Ù¾Ø§ÛŒÙ‡ Ø´Ø§Ù…Ù„ Ù…Ø­ØªÙˆØ§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ø¯Ø±ÙˆØ³ ØªØ±Ù… Û± ØªØ§ Ûµ Ø§Ø³Øª.\n'
         'Ù…Ø³ÛŒØ±: ğŸ“š Ù…Ù†Ø§Ø¨Ø¹ â† ğŸ”¬ Ø¹Ù„ÙˆÙ… Ù¾Ø§ÛŒÙ‡ â† ØªØ±Ù… â† Ø¯Ø±Ø³ â† Ø¬Ù„Ø³Ù‡\n'
         'Ø¯Ø± Ù‡Ø± Ø¬Ù„Ø³Ù‡ØŒ Ù…Ø­ØªÙˆØ§ (ÙˆÛŒØ¯ÛŒÙˆØŒ Ø¬Ø²ÙˆÙ‡ØŒ Ù¾Ø§ÙˆØ±Ù¾ÙˆÛŒÙ†ØªØŒ ÙˆÛŒØ³ Ø§Ø³ØªØ§Ø¯ Ùˆ...) Ù‚Ø§Ø¨Ù„ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø§Ø³Øª.\n\n'
         'âš ï¸ ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ù‡Ø± ØªØ±Ù… Ø¨Ø± Ø§Ø³Ø§Ø³ Ú†Ø§Ø±Øª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ø§Ø³Øª Ùˆ Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø¨Ø§ Ø§Ù†ØªØ®Ø§Ø¨ ÙˆØ§Ø­Ø¯ Ø´Ù…Ø§ Ù…ØªÙØ§ÙˆØª Ø¨Ø§Ø´Ø¯.'),
        ('Ú†Ø·ÙˆØ± Ù…Ø­ØªÙˆØ§ÛŒ ÛŒÚ© Ø¬Ù„Ø³Ù‡ Ø±Ø§ Ù¾ÛŒØ¯Ø§ Ú©Ù†Ù…ØŸ',
         'Ù…Ø³ÛŒØ±: Ù…Ù†Ø§Ø¨Ø¹ â† Ø¹Ù„ÙˆÙ… Ù¾Ø§ÛŒÙ‡ â† ØªØ±Ù… Ù…Ø±Ø¨ÙˆØ·Ù‡ â† Ù†Ø§Ù… Ø¯Ø±Ø³ â† Ø´Ù…Ø§Ø±Ù‡ Ø¬Ù„Ø³Ù‡\n'
         'Ø¯Ø± ØµÙØ­Ù‡ Ø¬Ù„Ø³Ù‡ØŒ Ù‡Ù…Ù‡ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ (ÙˆÛŒØ¯ÛŒÙˆØŒ Ù¾Ø§ÙˆØ±Ù¾ÙˆÛŒÙ†ØªØŒ Ø¬Ø²ÙˆÙ‡ PDFØŒ ÙˆÛŒØ³ Ø§Ø³ØªØ§Ø¯) Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.\n'
         'Ù…Ù…Ú©Ù† Ø§Ø³Øª Ù‡Ø± Ù†ÙˆØ¹ ÙØ§ÛŒÙ„ Ú†Ù†Ø¯ Ù‚Ø³Ù…Øª Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯.'),
        ('Ù…Ø­ØªÙˆØ§ÛŒ Ø¬Ø¯ÛŒØ¯ Ú©ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒØ´Ù‡ØŸ',
         'Ø§Ø¯Ù…ÛŒÙ† Ù…Ø­ØªÙˆØ§ Ø¨Ø¹Ø¯ Ø§Ø² Ù‡Ø± Ø¬Ù„Ø³Ù‡ Ú©Ù„Ø§Ø³ØŒ Ù…Ø­ØªÙˆØ§ Ø±Ø§ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.\n'
         'Ø§Ú¯Ø± Ø§Ø¹Ù„Ø§Ù† "Ù…Ù†Ø§Ø¨Ø¹ Ø¬Ø¯ÛŒØ¯" Ø±Ø§ ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù‡ Ø¨Ø§Ø´ÛŒØ¯ØŒ ÙˆÙ‚ØªÛŒ ÙØ§ÛŒÙ„ Ø¬Ø¯ÛŒØ¯ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ø´ÙˆØ¯ Ù¾ÛŒØ§Ù… Ø¯Ø±ÛŒØ§ÙØª Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯.\n'
         'ØªÙ†Ø¸ÛŒÙ… Ø§Ø¹Ù„Ø§Ù†: Ø¯Ú©Ù…Ù‡ ğŸ”” Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§'),
        ('ØªÙØ§ÙˆØª Ø§Ù†ÙˆØ§Ø¹ Ù…Ø­ØªÙˆØ§ Ú†ÛŒÙ‡ØŸ',
         'ğŸ¥ ÙˆÛŒØ¯ÛŒÙˆ Ú©Ù„Ø§Ø³: Ø¶Ø¨Ø· ÙˆÛŒØ¯ÛŒÙˆÛŒÛŒ Ú©Ù„Ø§Ø³\n'
         'ğŸ“Š Ù¾Ø§ÙˆØ±Ù¾ÙˆÛŒÙ†Øª: Ø§Ø³Ù„Ø§ÛŒØ¯Ù‡Ø§ÛŒ Ø§Ø³ØªØ§Ø¯\n'
         'ğŸ“„ Ø¬Ø²ÙˆÙ‡ PDF: Ø¬Ø²ÙˆÙ‡ Ø¯Ø±Ø³ÛŒ\n'
         'ğŸ“ Ù†Ú©Ø§Øª: Ù†Ú©Ø§Øª Ù…Ù‡Ù…\n'
         'ğŸ§ª ØªØ³Øª: Ø³ÙˆØ§Ù„Ø§Øª ØªÙ…Ø±ÛŒÙ†ÛŒ\n'
         'ğŸ™ ÙˆÛŒØ³ Ø§Ø³ØªØ§Ø¯: ØªÙˆØ¶ÛŒØ­Ø§Øª ØµÙˆØªÛŒ Ø§Ø³ØªØ§Ø¯'),
    ],
    'ğŸ“š Ø±ÙØ±Ù†Ø³â€ŒÙ‡Ø§': [
        ('Ø±ÙØ±Ù†Ø³â€ŒÙ‡Ø§ Ú†ÛŒ Ù‡Ø³ØªÙ†ØŸ',
         'Ø±ÙØ±Ù†Ø³â€ŒÙ‡Ø§ Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ÛŒ Ù…Ø±Ø¬Ø¹ Ø¯Ø±Ø³ÛŒ Ø¨Ù‡ ÙØ±Ù…Øª PDF Ù‡Ø³ØªÙ†Ø¯.\n'
         'Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø¯Ø±Ø³ØŒ ÛŒÚ© ÛŒØ§ Ú†Ù†Ø¯ Ú©ØªØ§Ø¨ Ù…Ø±Ø¬Ø¹ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯ Ùˆ Ù‡Ø± Ú©ØªØ§Ø¨ Ù…Ù…Ú©Ù† Ø§Ø³Øª Ù†Ø³Ø®Ù‡ ÙØ§Ø±Ø³ÛŒ (ØªØ±Ø¬Ù…Ù‡) ÛŒØ§ Ù„Ø§ØªÛŒÙ† (Ø§ØµÙ„ÛŒ) Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯.'),
        ('ØªÙØ§ÙˆØª Ù†Ø³Ø®Ù‡ ÙØ§Ø±Ø³ÛŒ Ùˆ Ù„Ø§ØªÛŒÙ† Ú†ÛŒÙ‡ØŸ',
         'ğŸŒ Ù†Ø³Ø®Ù‡ Ù„Ø§ØªÛŒÙ†: Ú©ØªØ§Ø¨ Ø§ØµÙ„ÛŒ Ø¨Ù‡ Ø²Ø¨Ø§Ù† Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ\n'
         'ğŸ‡®ğŸ‡· Ù†Ø³Ø®Ù‡ ÙØ§Ø±Ø³ÛŒ: ØªØ±Ø¬Ù…Ù‡ ÙØ§Ø±Ø³ÛŒ Ù‡Ù…Ø§Ù† Ú©ØªØ§Ø¨\n'
         'Ø§Ù†ØªØ®Ø§Ø¨ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†ÛŒØ§Ø² Ùˆ Ø³Ø·Ø­ Ø²Ø¨Ø§Ù† Ø´Ù…Ø§ Ø§Ø³Øª.'),
        ('Ú†Ø·ÙˆØ± Ø±ÙØ±Ù†Ø³ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø±Ù… Ø±Ùˆ Ù¾ÛŒØ¯Ø§ Ú©Ù†Ù…ØŸ',
         'Ù…Ø³ÛŒØ±: ğŸ“š Ù…Ù†Ø§Ø¨Ø¹ â† ğŸ“– Ø±ÙØ±Ù†Ø³â€ŒÙ‡Ø§ â† Ù†Ø§Ù… Ø¯Ø±Ø³ â† Ù†Ø§Ù… Ú©ØªØ§Ø¨ â† Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø³Ø®Ù‡ ÙØ§Ø±Ø³ÛŒ ÛŒØ§ Ù„Ø§ØªÛŒÙ†'),
    ],
    'ğŸ§ª Ø¨Ø§Ù†Ú© Ø³ÙˆØ§Ù„': [
        ('Ø¨Ø§Ù†Ú© Ø³ÙˆØ§Ù„ Ú†Ù‡ Ø¨Ø®Ø´â€ŒÙ‡Ø§ÛŒÛŒ Ø¯Ø§Ø±Ù‡ØŸ',
         'ğŸ“ Ø¨Ø§Ù†Ú© ÙØ§ÛŒÙ„ Ø§Ø¯Ù…ÛŒÙ†: ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ PDF Ø³ÙˆØ§Ù„Ø§Øª Ø¢Ù¾Ù„ÙˆØ¯ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· Ø§Ø¯Ù…ÛŒÙ†\n'
         'ğŸ’¡ ØªÙ…Ø±ÛŒÙ† ØªØ³ØªÛŒ: Ø³ÙˆØ§Ù„Ø§Øª Ú†Ù‡Ø§Ø±Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ ØªØ¹Ø§Ù…Ù„ÛŒ\n'
         'âœï¸ Ø·Ø±Ø§Ø­ÛŒ Ø³ÙˆØ§Ù„: Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø³ÙˆØ§Ù„ Ø·Ø±Ø§Ø­ÛŒ Ú©Ù†ÛŒØ¯'),
        ('Ú†Ø·ÙˆØ± Ø³ÙˆØ§Ù„ Ø·Ø±Ø§Ø­ÛŒ Ú©Ù†Ù…ØŸ',
         'Ø¯Ø± Ø¨Ø§Ù†Ú© Ø³ÙˆØ§Ù„ØŒ âœï¸ Ø·Ø±Ø§Ø­ÛŒ Ø³ÙˆØ§Ù„ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.\n'
         'Ø¯Ø±Ø³ Ùˆ Ù…Ø¨Ø­Ø« Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø±Ø¯Ù‡ Ùˆ Ûµ Ù…Ø±Ø­Ù„Ù‡ Ø±Ø§ Ø·ÛŒ Ú©Ù†ÛŒØ¯:\n'
         '1. Ù…ØªÙ† Ø³ÙˆØ§Ù„\n2. Û´ Ú¯Ø²ÛŒÙ†Ù‡\n3. Ú¯Ø²ÛŒÙ†Ù‡ ØµØ­ÛŒØ­\n4. Ø³Ø·Ø­ Ø³Ø®ØªÛŒ\n5. ØªÙˆØ¶ÛŒØ­\n'
         'Ø³ÙˆØ§Ù„ Ø´Ù…Ø§ Ø¨Ø¹Ø¯ Ø§Ø² ØªØ£ÛŒÛŒØ¯ Ø§Ø¯Ù…ÛŒÙ† Ø¨Ù‡ Ø¨Ø§Ù†Ú© Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.'),
        ('ØªÙ…Ø±ÛŒÙ† ØªØ³ØªÛŒ Ú†Ù‡ Ø­Ø§Ù„Øªâ€ŒÙ‡Ø§ÛŒÛŒ Ø¯Ø§Ø±Ù‡ØŸ',
         'â€¢ ØªÙ…Ø±ÛŒÙ† Ø¢Ø²Ø§Ø¯: Ø³ÙˆØ§Ù„â€ŒÙ‡Ø§ÛŒ ØªØµØ§Ø¯ÙÛŒ\n'
         'â€¢ ØªÙ…Ø±ÛŒÙ† Ù†Ù‚Ø§Ø· Ø¶Ø¹Ù: Ø³ÙˆØ§Ù„â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ù‚Ø¨Ù„Ø§Ù‹ Ø§Ø´ØªØ¨Ø§Ù‡ Ø²Ø¯Ù‡â€ŒØ§ÛŒØ¯\n'
         'â€¢ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ù…ØªØ­Ø§Ù†: Û²Û° Ø³ÙˆØ§Ù„ Ù¾Ø´Øª Ø³Ø± Ù‡Ù…\n'
         'â€¢ Ø³ÙˆØ§Ù„Ø§Øª Ø³Ø®Øª: ÙÙ‚Ø· Ø³ÙˆØ§Ù„Ø§Øª Ø³Ø·Ø­ Ø¯Ø´ÙˆØ§Ø±'),
    ],
    'ğŸ“… Ø¨Ø±Ù†Ø§Ù…Ù‡ Ùˆ Ø§Ù…ØªØ­Ø§Ù†Ø§Øª': [
        ('Ø¨Ø±Ù†Ø§Ù…Ù‡ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ Ú†Ø·ÙˆØ± Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒØ´Ù‡ØŸ',
         'Ø¯Ø± Ø¨Ø®Ø´ ğŸ“… Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ø¨ÛŒÙ†ÛŒØ¯:\n'
         'ğŸ“– Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§: Ø¨Ø± Ø§Ø³Ø§Ø³ Ú¯Ø±ÙˆÙ‡ Ø®ÙˆØ¯ØªØ§Ù†\n'
         'ğŸ“ Ø§Ù…ØªØ­Ø§Ù†Ø§Øª: ØªØ§Ø±ÛŒØ® Ø¨Ù‡ ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ\n'
         'ğŸ”„ Ø¬Ø¨Ø±Ø§Ù†ÛŒ: Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ø¬Ø¨Ø±Ø§Ù†ÛŒ\n'
         'â³ Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ù†Ø²Ø¯ÛŒÚ©: Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Û±Û´ Ø±ÙˆØ² Ø¢ÛŒÙ†Ø¯Ù‡'),
        ('ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø§Ù…ØªØ­Ø§Ù† Ú†Ø·ÙˆØ± Ú©Ø§Ø± Ù…ÛŒÚ©Ù†Ù‡ØŸ',
         'Ø±Ø¨Ø§Øª Û·ØŒ Û³ Ùˆ Û± Ø±ÙˆØ² Ù‚Ø¨Ù„ Ø§Ø² Ù‡Ø± Ø§Ù…ØªØ­Ø§Ù† Ù¾ÛŒØ§Ù… ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.\n'
         'Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù†ØŒ Ø§Ø¹Ù„Ø§Ù† "ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø§Ù…ØªØ­Ø§Ù†" Ø¨Ø§ÛŒØ¯ Ø¯Ø± ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø´Ù…Ø§ Ø±ÙˆØ´Ù† Ø¨Ø§Ø´Ø¯.\n'
         'ØªÙ†Ø¸ÛŒÙ…: Ø¯Ú©Ù…Ù‡ ğŸ”” Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§'),
        ('ØªÙØ§ÙˆØª Ú¯Ø±ÙˆÙ‡ Û± Ùˆ Ú¯Ø±ÙˆÙ‡ Û² Ø¯Ø± Ø¨Ø±Ù†Ø§Ù…Ù‡ØŸ',
         'Ø¨Ø±Ù†Ø§Ù…Ù‡ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ø¯Ùˆ Ú¯Ø±ÙˆÙ‡ Ù…ØªÙØ§ÙˆØª Ø§Ø³Øª.\n'
         'Ø±Ø¨Ø§Øª Ø¨Ø± Ø§Ø³Ø§Ø³ Ú¯Ø±ÙˆÙ‡ÛŒ Ú©Ù‡ Ù‡Ù†Ú¯Ø§Ù… Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø±Ø¯ÛŒØ¯ØŒ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø´Ù…Ø§ Ø±Ø§ Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.\n'
         'Ø¨Ø±Ø§ÛŒ ØªØºÛŒÛŒØ± Ú¯Ø±ÙˆÙ‡: ğŸ‘¤ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ â† ØªØºÛŒÛŒØ± Ú¯Ø±ÙˆÙ‡'),
    ],
    'ğŸ‘¤ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ùˆ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ': [
        ('Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø®ÙˆØ¯Ù… Ø±Ùˆ Ú©Ø¬Ø§ Ø¨Ø¨ÛŒÙ†Ù…ØŸ',
         'Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ ğŸ‘¤ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø¯Ø± Ú©ÛŒØ¨ÙˆØ±Ø¯ Ø§ØµÙ„ÛŒ Ø¨Ø²Ù†ÛŒØ¯.\n'
         'Ø¯Ø± Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ø¨ÛŒÙ†ÛŒØ¯: Ù†Ø§Ù…ØŒ Ú¯Ø±ÙˆÙ‡ØŒ Ø¢Ù…Ø§Ø± ØªØ­ØµÛŒÙ„ÛŒØŒ Ø¯Ø±ØµØ¯ Ù…ÙˆÙÙ‚ÛŒØªØŒ Ø±ØªØ¨Ù‡.\n'
         'Ù‡Ù…Ú†Ù†ÛŒÙ† Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ù†Ø§Ù… ÛŒØ§ Ú¯Ø±ÙˆÙ‡ Ø®ÙˆØ¯ Ø±Ø§ ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ù†ÛŒØ¯.'),
        ('Ú†Ø·ÙˆØ± Ù†Ø§Ù…Ù… ÛŒØ§ Ú¯Ø±ÙˆÙ‡Ù… Ø±Ùˆ ØªØºÛŒÛŒØ± Ø¨Ø¯Ù…ØŸ',
         'ğŸ‘¤ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ â† âœï¸ ÙˆÛŒØ±Ø§ÛŒØ´ Ù†Ø§Ù…  ÛŒØ§  ğŸ‘¥ ØªØºÛŒÛŒØ± Ú¯Ø±ÙˆÙ‡\n'
         'ØªØºÛŒÛŒØ±Ø§Øª ÙÙˆØ±ÛŒ Ø§Ø¹Ù…Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯.'),
        ('Ú†Ø±Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Ù†Ø¯Ø§Ø±Ù…ØŸ',
         'Ø¨Ø¹Ø¯ Ø§Ø² Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…ØŒ Ø§Ø¯Ù…ÛŒÙ† Ø¨Ø§ÛŒØ¯ Ø­Ø³Ø§Ø¨ Ø´Ù…Ø§ Ø±Ø§ ØªØ£ÛŒÛŒØ¯ Ú©Ù†Ø¯.\n'
         'Ø§ÛŒÙ† ÙØ±Ø§ÛŒÙ†Ø¯ Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ú©Ù…ØªØ± Ø§Ø² Û²Û´ Ø³Ø§Ø¹Øª Ø·ÙˆÙ„ Ù…ÛŒâ€ŒÚ©Ø´Ø¯.\n'
         'Ø§Ú¯Ø± Ø¨ÛŒØ´ØªØ± Ú¯Ø°Ø´ØªÙ‡ØŒ Ø§Ø² Ø¨Ø®Ø´ ğŸ« Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ØªÛŒÚ©Øª Ø¨Ø²Ù†ÛŒØ¯.'),
        ('Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ Ø±Ùˆ Ú†Ø·ÙˆØ± Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù†Ù…ØŸ',
         'Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ ğŸ”” Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ Ø¨Ø²Ù†ÛŒØ¯.\n'
         'Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø±ÙˆØ´Ù†/Ø®Ø§Ù…ÙˆØ´ Ú©Ù†ÛŒØ¯:\n'
         'ğŸ“š Ù…Ù†Ø§Ø¨Ø¹ Ø¬Ø¯ÛŒØ¯ â€” ğŸ“… ØªØºÛŒÛŒØ± Ø¨Ø±Ù†Ø§Ù…Ù‡ â€” ğŸ“ ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø§Ù…ØªØ­Ø§Ù† â€” ğŸ§ª Ø³ÙˆØ§Ù„ Ø±ÙˆØ²Ø§Ù†Ù‡'),
    ],
    'ğŸ« ØªÛŒÚ©Øª Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ': [
        ('Ú†Ø·ÙˆØ± ØªÛŒÚ©Øª Ø¨Ø²Ù†Ù…ØŸ',
         'Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ ğŸ« Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø¨Ø²Ù†ÛŒØ¯ â† Ø§Ø±Ø³Ø§Ù„ ØªÛŒÚ©Øª Ø¬Ø¯ÛŒØ¯ â† Ø§Ù†ØªØ®Ø§Ø¨ Ù…ÙˆØ¶ÙˆØ¹ â† Ù†ÙˆØ´ØªÙ† ØªÙˆØ¶ÛŒØ­\n'
         'ØªÛŒÚ©Øª Ø´Ù…Ø§ Ø¨Ù‡ Ø§Ø¯Ù…ÛŒÙ† Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ù¾Ø§Ø³Ø® Ø¯Ø±ÛŒØ§ÙØª Ø®ÙˆØ§Ù‡ÛŒØ¯ Ú©Ø±Ø¯.'),
        ('ÙˆØ¶Ø¹ÛŒØª ØªÛŒÚ©ØªÙ… Ø±Ùˆ Ú†Ø·ÙˆØ± Ø¨Ø¨ÛŒÙ†Ù…ØŸ',
         'ğŸ« Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ â† ØªÛŒÚ©Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ù†\n'
         'ğŸŸ¡ = Ø¨Ø§Ø² (Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ÛŒØ§ Ø¯Ø± Ø¬Ø±ÛŒØ§Ù†)\n'
         'ğŸŸ¢ = Ø¨Ø³ØªÙ‡ Ø´Ø¯Ù‡ (Ù…Ø´Ú©Ù„ Ø­Ù„ Ø´Ø¯Ù‡)\n'
         'Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø§Ø®Ù„ Ù‡Ø± ØªÛŒÚ©ØªØŒ ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø¨ÛŒÙ†ÛŒØ¯.'),
        ('Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù… Ø¨Ø¹Ø¯ Ø§Ø² Ù¾Ø§Ø³Ø® Ø§Ø¯Ù…ÛŒÙ† Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø³ÙˆØ§Ù„ Ø¨Ù¾Ø±Ø³Ù…ØŸ',
         'Ø¨Ù„Ù‡! ØªÛŒÚ©Øª ØªØ§ Ø²Ù…Ø§Ù†ÛŒ Ú©Ù‡ Ø§Ø¯Ù…ÛŒÙ† Ø¢Ù† Ø±Ø§ Ù†Ø¨Ø³ØªÙ‡ Ø¨Ø§Ø² Ø§Ø³Øª.\n'
         'Ø§Ø¯Ù…ÛŒÙ† ÙˆÙ‚ØªÛŒ Ù…Ø·Ù…Ø¦Ù† Ø´Ø¯ Ù…Ø´Ú©Ù„ Ø­Ù„ Ø´Ø¯Ù‡ØŒ ØªÛŒÚ©Øª Ø±Ø§ Ù…ÛŒâ€ŒØ¨Ù†Ø¯Ø¯.\n'
         'Ø§Ú¯Ø± Ø³ÙˆØ§Ù„ Ø¬Ø¯ÛŒØ¯ÛŒ Ø¯Ø§Ø±ÛŒØ¯ØŒ Ø§Ø² Ù‡Ù…Ø§Ù† ØªÛŒÚ©Øª ÛŒØ§ ØªÛŒÚ©Øª Ø¬Ø¯ÛŒØ¯ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.'),
    ],
    'âš™ï¸ Ù…Ø´Ú©Ù„Ø§Øª ÙÙ†ÛŒ': [
        ('Ø±Ø¨Ø§Øª Ø¬ÙˆØ§Ø¨ Ù†Ù…ÛŒØ¯Ù‡ Ú†ÛŒÚ©Ø§Ø± Ú©Ù†Ù…ØŸ',
         '/start Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯ ØªØ§ Ø±Ø¨Ø§Øª Ù…Ø¬Ø¯Ø¯ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø´ÙˆØ¯.\n'
         'Ø§Ú¯Ø± Ù…Ø´Ú©Ù„ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø´ØªØŒ Ú†Ù†Ø¯ Ø¯Ù‚ÛŒÙ‚Ù‡ ØµØ¨Ø± Ú©Ù†ÛŒØ¯ Ùˆ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒØ¯.\n'
         'Ø§Ú¯Ø± Ø­Ù„ Ù†Ø´Ø¯ØŒ Ø§Ø² Ø¨Ø®Ø´ ğŸ« Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ØªÛŒÚ©Øª Ø¨Ø²Ù†ÛŒØ¯.'),
        ('Ø§Ú¯Ø± Ø¹Ù…Ù„ÛŒØ§ØªÛŒ Ú¯ÛŒØ± Ú©Ø±Ø¯ Ú†ÛŒÚ©Ø§Ø± Ú©Ù†Ù…ØŸ',
         'Ø¯Ø³ØªÙˆØ± /cancel Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯ ØªØ§ Ù‡Ø± Ø¹Ù…Ù„ÛŒØ§Øª Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¬Ø§Ù… Ù„ØºÙˆ Ø´ÙˆØ¯.\n'
         'Ø³Ù¾Ø³ Ø§Ø² Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ú©ÛŒØ¨ÙˆØ±Ø¯ Ø¨Ø±Ø§ÛŒ Ø§Ø¯Ø§Ù…Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.'),
        ('ÙØ§ÛŒÙ„ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ù†Ù…ÛŒØ´Ù‡ØŸ',
         'Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ Ø§ÛŒÙ†ØªØ±Ù†Øª Ø´Ù…Ø§ Ø¨Ø±Ù‚Ø±Ø§Ø± Ø§Ø³Øª.\n'
         'Ú¯Ø§Ù‡ÛŒ ØªÙ„Ú¯Ø±Ø§Ù… Ø¨Ø±Ø§ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯ Ø²Ù…Ø§Ù† Ø¨ÛŒØ´ØªØ±ÛŒ Ù…ÛŒâ€ŒØ¨Ø±Ø¯.\n'
         'Ø§Ú¯Ø± Ù…Ø´Ú©Ù„ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø´ØªØŒ Ø§Ø² ğŸ« Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ØªÛŒÚ©Øª Ø¨Ø²Ù†ÛŒØ¯.'),
    ],
}


async def faq_callback(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query  = update.callback_query
    await query.answer()
    data   = query.data
    parts  = data.split(':')
    action = parts[1] if len(parts) > 1 else 'main'

    if action == 'main':
        await _faq_main(query, context)
    elif action == 'cat':
        await _faq_list(query, context, int(parts[2]))
    elif action == 'item':
        await _faq_answer(query, context, int(parts[2]), int(parts[3]))
    elif action == 'back_cats':
        await _faq_main(query, context)


async def _get_faq_data(context):
    db_faqs = await db.faq_get_all()
    if db_faqs:
        cats = {}
        for f in db_faqs:
            cat = f.get('category', 'Ø¹Ù…ÙˆÙ…ÛŒ')
            cats.setdefault(cat, []).append((f['question'], f['answer']))
        return cats
    return DEFAULT_FAQS


async def _faq_main(query, context):
    faq_data = await _get_faq_data(context)
    context.user_data['_faq_data'] = faq_data
    cats     = list(faq_data.keys())
    keyboard = []
    for i, cat in enumerate(cats):
        count = len(faq_data[cat])
        keyboard.append([InlineKeyboardButton(f"{cat} ({count} Ø³ÙˆØ§Ù„)", callback_data=f'faq:cat:{i}')])
    await query.edit_message_text(
        "â“ <b>Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„</b>\n\n"
        "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n"
        "Ø¯Ø± Ú©Ø¯Ø§Ù… Ø¨Ø®Ø´ Ø³ÙˆØ§Ù„ Ø¯Ø§Ø±ÛŒØ¯ØŸ",
        parse_mode='HTML', reply_markup=InlineKeyboardMarkup(keyboard))


async def _faq_list(query, context, cat_idx):
    faq_data = context.user_data.get('_faq_data') or await _get_faq_data(context)
    context.user_data['_faq_data'] = faq_data
    cats = list(faq_data.keys())
    if cat_idx >= len(cats):
        await query.answer("âŒ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯!", show_alert=True); return
    cat   = cats[cat_idx]
    items = faq_data[cat]
    keyboard = []
    for i, (q, _) in enumerate(items):
        keyboard.append([InlineKeyboardButton(f"â“ {q[:45]}", callback_data=f'faq:item:{cat_idx}:{i}')])
    keyboard.append([InlineKeyboardButton("ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª", callback_data='faq:back_cats')])
    await query.edit_message_text(
        f"{cat}\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nØ±ÙˆÛŒ Ù‡Ø± Ø³ÙˆØ§Ù„ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯:",
        parse_mode='HTML', reply_markup=InlineKeyboardMarkup(keyboard))


async def _faq_answer(query, context, cat_idx, item_idx):
    faq_data = context.user_data.get('_faq_data') or await _get_faq_data(context)
    cats     = list(faq_data.keys())
    if cat_idx >= len(cats): await query.answer("âŒ Ø®Ø·Ø§!", show_alert=True); return
    cat   = cats[cat_idx]
    items = faq_data[cat]
    if item_idx >= len(items): await query.answer("âŒ Ø³ÙˆØ§Ù„ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯!", show_alert=True); return
    question, answer = items[item_idx]
    await query.edit_message_text(
        f"â“ <b>{question}</b>\n\n"
        f"â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n"
        f"ğŸ’¡ {answer}",
        parse_mode='HTML',
        reply_markup=InlineKeyboardMarkup([
            [InlineKeyboardButton("ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø³ÙˆØ§Ù„Ø§Øª", callback_data=f'faq:cat:{cat_idx}')],
            [InlineKeyboardButton("ğŸ  Ù‡Ù…Ù‡ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§",  callback_data='faq:back_cats')],
        ]))
